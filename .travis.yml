language: generic

services:
  - docker

before_install:
  - docker run --rm -d -p 5000:5000 -v "$(pwd)"/test:/auth -e "REGISTRY_AUTH=htpasswd" -e "REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm" -e REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd registry:2

script:
  - BASIC_AUTH=testuser:testpassword ./docker_reg_tool http://localhost:5000 list
